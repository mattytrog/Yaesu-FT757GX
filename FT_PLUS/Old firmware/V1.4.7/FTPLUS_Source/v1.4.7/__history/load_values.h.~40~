


void set_defaults()
{
   for (INT i = 0; i <= 18; i++) {save32 (i, 700000); }
   for (i = 19; i <= 29; i++)    {save32 (i, 0); }
   for (i = 30; i <= 40; i++)    {save32 (i, band_bank[i - 30]); }
   for (i = 41; i <= 51; i++)    {save32 (i, band_bank[i - 41]); }
   for (i = 52; i <= 53; i++)    {save32 (i, 0); }
                                 save32 (54, minimum_freq); 
                                 save32 (55, maximum_freq);
                                 save_cache_mem_mode_f (700000) ;
                                 save_offset_f(0);
                                 
                                 save8(vfo_n, 0); //Active VFO A / B
                                 save8(mode_n, 0); //Mem mode
                                 save8(mem_ch_n, 0); //default mem channel
                                 save8(fine_tune_n, 0); //Fine - tuning display (disabled by default)
                                 save8(dial_n,0); //dial_accel / type 0 = disabled, 1 = type1
                                 save8(dcs_n, 15) ;
                                 save8(band_offset_n,0) ;
                                 save8(cat_mode_n, default_cat_mode) ;
                                 save8(baud_n,3);
                                 save8(dummy_mode_n, 49) ;
                                 save8(id_enable_n,0) ;
                                 save8(savetimer_n, 1);
                                 save8(band_n,(calc_band (700000))) ;
   #ifdef include_cb
                                 save8(cb_ch_n, 19);
                                 save8(cb_reg_n, 3);
   #endif
                                 save8(checkbyte_n, 1); //Check byte
#ifdef store_to_eeprom
      reset_cpu () ;
#endif
}

void load_values()
{
#ifdef store_to_eeprom
      min_freq =        load32(54); 
      max_freq =        load32(55);
      active_vfo =      load8(vfo_n);
      m_mode =        load8(mode_n);
      mem_channel =     load8(mem_ch_n);
      fine_tune =       load8(fine_tune_n);
      per_band_offset = load8(band_offset_n);
#ifdef include_cat
      cat_mode =        load8(cat_mode_n);
      baud_rate_n =     load8(baud_n);
      dummy_mode =      load8(dummy_mode_n);
      id_enable =       load8(id_enable_n);
#endif
      speed_dial =      load8(dial_n);
      dcs =             load8(dcs_n);
      band =            load8(band_n);
      savetimerON =     load8(savetimer_n);
      offset =          load_offset_f();
      #ifdef include_cb

      cb_region =       load8(cb_reg_n);
      cb_channel =      load8(cb_ch_n);

      #endif

#ELSE
      min_freq =        minimum_freq;
      max_freq =        maximum_freq;
      active_vfo =      0;
      mem_mode =        0;
      mem_channel =     0;
      fine_tune =       0;
      per_band_offset = 0;
#ifdef include_cat
      cat_mode =        default_cat_mode;
      baud_rate_n =     3;
      dummy_mode =      49;
      id_enable =       0;
#endif
      speed_dial =      0;
      dcs =             15;
      band =            calc_band (700000);
      savetimerON =     0;
      offset =          load_offset_f();
      display_type =    1;
#ifdef include_cb
      cb_region =       0;
      cb_channel =      19;
#endif

#endif
      
   
#ifdef include_cat
      switch (baud_rate_n)
      {
         
         case 1: set_uart_speed (1200); break;
         case 2: set_uart_speed (2400); break;
         case 3: set_uart_speed (4800); break;
         case 4: set_uart_speed (9600); break;
         case 5: set_uart_speed (19200); break;
         case 6: set_uart_speed (38400); break;
         case 7: set_uart_speed (57600); break;
         case 8: set_uart_speed (115200); break;
         default: set_uart_speed (4800); break;
      }
   #endif
      set_dcs (dcs) ;
      
}




#ifdef include_set_minmax
void set_min_max()
{
   int1 set_max = 0;
   int1 res = 0;
   int32 tmp_limit_low = min_freq;
   int32 tmp_limit_hi = max_freq;
   VFD_data (0xFF, 0xFF, tmp_limit_low, 1,0,0, 0, 0);
   while(true)
   {
      
      if(!set_max)
      {
         if(tmp_limit_low < 1) tmp_limit_low = 0;
         if(tmp_limit_low > 9999999) tmp_limit_low = 9999999;
         res = basic_dial (tmp_limit_low, 100);
         if(res) VFD_data (0xFF, 0xFF, tmp_limit_low, 1,0,0, 0, 0);
      }
      
      if(set_max)
      {
         if(tmp_limit_hi < 1) tmp_limit_hi = 0;
         if(tmp_limit_hi >= 9999999) tmp_limit_hi = 9999999;
         res = basic_dial (tmp_limit_hi, 100);
         if(res) VFD_data (0xFF, 0xFF, tmp_limit_hi, 2,0,0, 0, 0);
      }
      
      if(!res)
      {
      
         k4 = 1; delay_us (1);
         if(pb0)
         {
            while(pb0){}
            if(!set_max) 
            {
            
            set_max = 1;
            VFD_data (0xFF, 0xFF, tmp_limit_hi, 2,0,0, 0, 0);
            }
            else
            {
            
            set_max = 0;
            VFD_data (0xFF, 0xFF, tmp_limit_low, 1,0,0, 0, 0);
            }
            beep();
         }
            if(pb1) 
            {
            while(pb1){}
            break;
            }
         
      }
   
   }
   k4 = 0;
   save32 (54, tmp_limit_low);
   save32 (55, tmp_limit_hi);
   reset_cpu();
}
#endif

